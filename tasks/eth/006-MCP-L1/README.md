# Mainnet MCP L1 Upgrade

Status: DRAFT, NOT READY TO SIGN

> [!IMPORTANT] !!! DO NOT SIGN using this playbook yet, as the associated governance proposal has
> not yet passed.

## Objective

```markdown
This is the playbook for executing Upgrade #6, Multi-Chain Prep (MCP) L1.

The proposal was:
- [X] Approved by Token House voting here: https://vote.optimism.io/proposals/47253113366919812831791422571513347073374828501432502648295761953879525315523
- [ ] Not vetoed by the Citizens' house here: https://snapshot.org/#/citizenshouse.eth/proposal/0x2bc6565053b73813c6b0a001c8c07eb5656234b4d8bae12ba6541250993d1d25

The proposal should be treated as the source of truth and used by the Optimism Foundation and the Collectiveâ€™s
first Security Council to verify the correctness of the onchain operations.

## Signing and execution

Please see the signing and execution instructions in [NESTED.md](../../../NESTED.md).

## State Validations

Now click on the "State" tab.

- Verify that the following state overrides are made:
   * For address `0x5a0Aae59D09fccBdDb6C6CcEB07B7279367C3d2A`:
      * before: `0x0000000000000000000000000000000000000000000000000000000000000004`
      * after : `0x0000000000000000000000000000000000000000000000000000000000000001`
   * For address `0xc2819DC788505Aac350142A7A707BF9D03E3Bd03`:
      1. before: `0x0000000000000000000000000000000000000000000000000000000000000003`
         after : `0x0000000000000000000000000000000000000000000000000000000000000001`
      2. before: `0x0000000000000000000000000000000000000000000000000000000000000004`
         after : `0x0000000000000000000000000000000000000000000000000000000000000001`
      3. before: `0x316a0aac0d94f5824f0b66f5bbe94a8c360a17699a1d3a233aafcf7146e9f11c`
         asfter : `0x0000000000000000000000000000000000000000000000000000000000000001`
      4. before: `0xe90b7bceb6e7df5418fb78d8ee546e97c83a08bbccc01a0644d599ccd2a7c2e0`
         after : `0x000000000000000000000000ca11bde05977b3631167028862be2a173976ca11`

- Verify that the following state changes are made:
   * For address `0x229047fed2591dbec1ef1118d64f7af3db9eb290`:
      * key `0xe314dfc40f0025322aacc0ba8ef420b62fb3b702cf01e0cdf3d829117ac2ff1a`
         * before: `0x0000000000000000000000000000000000000005000000000000000000000000`
         * after : `0x0000000000000000000000000000000000000006000000000000000000000000`
      * key `0x360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc`
         * before: `0x00000000000000000000000033a032ec93ec0c492ec4bf0b30d5f51986e5a314`
         * after: `0x000000000000000000000000ba2492e52f45651b60b8b38d4ea5e2390c64ffb1`
      * key `0x383f291819e6d54073bc9a648251d97421076bdd101933c0c022219ce9580636`
         * before: `0x0000000000000000000000000000000000000000000000000000000000000000`
         * after: `0x00000000000000000000000025ace71c97b33cc4729cf772ae268934f7ab5fa1`
      * key `0x46adcbebc6be8ce551740c29c47c8798210f23f7f4086c41752944352568d5a7`
         * before: `0x0000000000000000000000000000000000000000000000000000000000000000`
         * after: `0x0000000000000000000000005a7749f83b81b301cab5f48eb8516b986daef23d`
      * key `0x4b6c74f9e688cb39801f2112c14a8c57232a3fc5202e1444126d4bce86eb19ac`
         * before: `0x0000000000000000000000000000000000000000000000000000000000000000`
         * after: `0x000000000000000000000000beb5fc579115071764c7423a4f12edde41f106ed`
      * key `0x71ac12829d66ee73d8d95bff50b3589745ce57edae70a3fb111a2342464dc597`
         * before: `0x0000000000000000000000000000000000000000000000000000000000000000`
         * after: `0x000000000000000000000000ff00000000000000000000000000000000000010`
      * key `0x9904ba90dde5696cda05c9e0dab5cbaa0fea005ace4d11218a02ac668dad6376`
         * before: `0x0000000000000000000000000000000000000000000000000000000000000000`
         * after: `0x00000000000000000000000099c9fc46f92e8a1c0dec1b1747d010903e884be1`
      * key `0xa04c5bb938ca6fc46d95553abf0a76345ce3e722a30bf4f74928b8e7d852320c`
         * before: `0x0000000000000000000000000000000000000000000000000000000000000000`
         * after: `0x00000000000000000000000075505a97bd334e7bd3c476893285569c4136fa0f`
      * key `0xa11ee3ab75b40e88a0105e935d17cd36c8faee0138320d776c411291bdbbb19f`
         * before: `0x0000000000000000000000000000000000000000000000000000000000000000`
         * after: `0x000000000000000000000000000000000000000000000000000000000109d86c`
      * key `0xe52a667f71ec761b9b381c7b76ca9b852adf7e8905da0e0ad49986a0a6871815`
         * before: `0x0000000000000000000000000000000000000000000000000000000000000000`
         * after: `0x000000000000000000000000dfe97868233d1aa22e815a266982f2cf17685a27`
   * For address `0x25ace71c97b33cc4729cf772ae268934f7ab5fa1`:
      * key `0x00000000000000000000000000000000000000000000000000000000000000cf`
         * before: `0x0000000000000000000000000000000000000000000000000000000000000000`
         * after: `0x0000000000000000000000004200000000000000000000000000000000000007`
      * key `0x00000000000000000000000000000000000000000000000000000000000000fb`
         * before: `0x00000000000000000000000095703e0982140d16f8eba6d158fccede42f04a4c`
         * after: `0x000000000000000000000000c2be75506d5724086deb7245bd260cc9753911be`
      * key `0x00000000000000000000000000000000000000000000000000000000000000fc`
         * before: `0x0000000000000000000000000000000000000000000000000000000000000000`
         * after: `0x000000000000000000000000beb5fc579115071764c7423a4f12edde41f106ed`
   * For address `0x5a0aae59d09fccbddb6c6cceb07b7279367c3d2a`:
      * key `0x0000000000000000000000000000000000000000000000000000000000000005`
         * before: `0x0000000000000000000000000000000000000000000000000000000000000001`
         * after: `0x0000000000000000000000000000000000000000000000000000000000000002`
      * key `0xe5a48f5ffaa688c5a5bcf794e48eb875102b7174501dea10998e539cfda7b3d1`
         * before: `0x0000000000000000000000000000000000000000000000000000000000000000`
         * after: `0x0000000000000000000000000000000000000000000000000000000000000001`
    * For address `0x5a7749f83b81b301cab5f48eb8516b986daef23d`:
      * key `0x0000000000000000000000000000000000000000000000000000000000000001`
         * before: `0x0000000000000000000000000000000000000000000000000000000000000000`
         * after: `0x00000000000000000000000025ace71c97b33cc4729cf772ae268934f7ab5fa1`
      * key `0x0000000000000000000000000000000000000000000000000000000000000002`
         * before: `0x0000000000000000000000000000000000000000000000000000000000000000`
         * after: `0x0000000000000000000000004200000000000000000000000000000000000014`
      * key `0x0000000000000000000000000000000000000000000000000000000000000032`
         * before: `0x00000000000000000000000095703e0982140d16f8eba6d158fccede42f04a4c`
         * after: `0x000000000000000000000000c2be75506d5724086deb7245bd260cc9753911be`
      * key `0x360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc`
         * before: `0x000000000000000000000000c599fa757c2bcaa5ae3753ab129237f38c10da0b`
         * after: `0x000000000000000000000000ae2af01232a6c4a4d3012c5ec5b1b35059caf10d`
   * For address `0x75505a97bd334e7bd3c476893285569c4136fa0f`:
      * key `0x0000000000000000000000000000000000000000000000000000000000000000`
         * before: `0x0000000000000000000000000000000000000000000000000000000000000000`
         * after: `0x0000000000000000000000000000000000000000000000000000000000000001`
      * key `0x0000000000000000000000000000000000000000000000000000000000000001`
         * before: `0x0000000000000000000000000000000000000000000000000000000000000000`
         * after: `0x00000000000000000000000099c9fc46f92e8a1c0dec1b1747d010903e884be1`
      * key `0x360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc`
         * before: `0x00000000000000000000000074e273220fa1cb62fd756fe6cbda8bbb89404ded`
         * after: `0x000000000000000000000000e01efbeb1089d1d1db9c6c8b135c934c0734c846`
   * For address `0x99c9fc46f92e8a1c0dec1b1747d010903e884be1`:
      * key `0x0000000000000000000000000000000000000000000000000000000000000003`
         * before: `0x0000000000000000000000000000000000000000000000000000000000000000`
         * after: `0x00000000000000000000000025ace71c97b33cc4729cf772ae268934f7ab5fa1`
      * key `0x0000000000000000000000000000000000000000000000000000000000000004`
         * before: `0x0000000000000000000000000000000000000000000000000000000000000000`
         * after: `0x0000000000000000000000004200000000000000000000000000000000000010`
      * key `0x0000000000000000000000000000000000000000000000000000000000000032`
         * before: `0x00000000000000000000000095703e0982140d16f8eba6d158fccede42f04a4c`
         * after: `0x000000000000000000000000c2be75506d5724086deb7245bd260cc9753911be`
      * key `0x360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc`
         * before: `0x000000000000000000000000566511a1a09561e2896f8c0fd77e8544e59bfdb0`
         * after: `0x00000000000000000000000064b5a5ed26dcb17370ff4d33a8d503f0fbd06cff`
   * For address `0xbeb5fc579115071764c7423a4f12edde41f106ed`:
      * key `0x0000000000000000000000000000000000000000000000000000000000000035`
         * before: `0x000000000000000000000095703e0982140d16f8eba6d158fccede42f04a4c00`
         * after: `0x0000000000000000000000c2be75506d5724086deb7245bd260cc9753911be00`
      * key `0x0000000000000000000000000000000000000000000000000000000000000036`
         * before: `0x0000000000000000000000000000000000000000000000000000000000000000`
         * after: `0x000000000000000000000000dfe97868233d1aa22e815a266982f2cf17685a27`
      * key `0x0000000000000000000000000000000000000000000000000000000000000037`
         * before: `0x0000000000000000000000000000000000000000000000000000000000000000`
         * after: `0x000000000000000000000000229047fed2591dbec1ef1118d64f7af3db9eb290`
      * key `0x360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc`
         * before: `0x000000000000000000000000ababe63514ddd6277356f8cc3d6518aa8bdeb4de`
         * after: `0x0000000000000000000000002d778797049fe9259d947d1ed8e5442226dfb589`
   * For address `0xc2819dc788505aac350142a7a707bf9d03e3bd03`:
      * key `0x0000000000000000000000000000000000000000000000000000000000000005`
         * before: `0x0000000000000000000000000000000000000000000000000000000000000001`
         * after: `0x0000000000000000000000000000000000000000000000000000000000000002`
   * For address `0xde1fcfb0851916ca5101820a69b13a4e276bd81f`:
         * before: `0x000000000000000000000000a95b24af19f8907390ed15f8348a1a5e6ccbc5c6`
         * after: `0x000000000000000000000000d3494713a5cfad3f5359379dfa074e2ac8c6fd65`
   * For address `0xdfe97868233d1aa22e815a266982f2cf17685a27`:
      * key `0x0000000000000000000000000000000000000000000000000000000000000004`
         * before: `0x0000000000000000000000000000000000000000000000000000000000000000`
         * after: `0x0000000000000000000000000000000000000000000000000000000000000708`
      * key `0x0000000000000000000000000000000000000000000000000000000000000005`
         * before: `0x0000000000000000000000000000000000000000000000000000000000000000`
         * after: `0x0000000000000000000000000000000000000000000000000000000000000002`
      * key `0x0000000000000000000000000000000000000000000000000000000000000006`
         * before: `0x0000000000000000000000000000000000000000000000000000000000000000`
         * after: `0x0000000000000000000000009ba6e03d8b90de867373db8cf1a58d2f7f006b3a`
      * key `0x0000000000000000000000000000000000000000000000000000000000000007`
         * before: `0x0000000000000000000000000000000000000000000000000000000000000000`
         * after: `0x000000000000000000000000473300df21d047806a082244b417f96b32f13a33`
      * key `0x0000000000000000000000000000000000000000000000000000000000000008`
         * before: `0x0000000000000000000000000000000000000000000000000000000000000000`
         * after: `0x0000000000000000000000000000000000000000000000000000000000093a80`
      * key `0x360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc`
         * before: `0x000000000000000000000000db5d932af15d00f879cabebf008cadaaaa691e06`
         * after: `0x000000000000000000000000f243bed163251380e78068d317ae10f26042b292`

* All other state changes (1) are a nonce change of `0x07dc0893cafbf810e3e72505041f2865726fd073`.

## Continue signing

At this point you may resume following the signing and execution instructions in section 3.3 of [NESTED.md](../../../NESTED.md).
